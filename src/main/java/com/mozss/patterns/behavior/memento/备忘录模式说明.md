- 备忘录模式在不破坏封装性的前提下，获取并保存一个对象内被状态，以便以后恢复它。又叫快照模式。

###引进
#####生活举例（这里插入图片或者文字简短描述）
#####UML结构图
![KDrU9U.png](https://s2.ax1x.com/2019/10/26/KDrU9U.png)
备忘录（memento）对象是一个用来存储另一个对象内部状态的快照（snapshot）的对象。备忘录模式的用意就是在不破坏封装（encapsulation）的
条件下，将一个对象的状态捕捉（Capture）住，并外部化（Externalize）,存储起来，从而可以在将来合适的时候把这个对象还原到存储起来的状态。

常见的软件系统往往不止存储一个状态，而是需要存储多个状态，这些状态常常是一个对象历史发展的不同阶段的快照，存储这些快照的备忘录对象叫做
此对象的历史，某一个快照所处的位置叫做检查点（CheckPoint）。

备忘录模式常常与命令模式和迭代模式一同使用。
#####模式涉及到的角色
![KDs7L9.png](https://s2.ax1x.com/2019/10/26/KDs7L9.png)
######备忘录角色（Memento）
备忘录角色有如下的责任：

- 将发起人对象的内部状态存储起来，备忘录可以根据发起人对象的判断来决定存储多少发起人（Originator）对象的内部状态。

- 备忘录可以保护其内容不被发起人（Originator）对象之外的任何对象所读取。

备忘录的两个等效接口：

- 窄接口：负责人对象（和其他除发起人对象之外的任何对象）看到的是备忘录的窄接口（narrow interface），这个窄接口只允许它把备忘录对象
传给其他的对象。

- 款接口：与负责人对象看到的窄接口相反的是，发起人对象可以看到一个宽接口（wide interface），这个宽接口允许它读取所有的数据，以便根据
这些数据恢复这个发起人对象的内部状态。

######发起人（Originator）
发起人角色有如下责任:

- 创建一个含有当前的内部状态的备忘录对象；

- 使用备忘录对象存储其内部状态。
######负责人（Caretaker）
负责人角色有如下的责任：

- 负责保存备忘录对象；

- 不检查备忘录对象的内容。

#####模式的几种形态（可有可无）
######一：
######二：

###实现
#####白箱实现

- 优点：比较简单
- 缺点：破坏对发起人的封装

#####黑箱实现

###应用
#####应用一（文字加举例）
#####应用一（文字加举例）

###实际的使用情况
#####JDBC与数据库
大多数的Java信息系统都是与数据库紧密联系的，这样的系统必然与JDBC库有密切的关系。其他的系统即便不使用数据库，也会使用某种存储方案，比如
文件存储。

无论哪一种存储方案，在架构设计的时候必须要注意将商业逻辑和存储逻辑分割开，这样做的原因是：

- 开发商业构件的技能与开发数据库构件的技能是完全不同的。将两者分割开来处理，意味着可以将它们交给不同的设计师，这显然对系统维护是有好处的。
- 在商业逻辑变化的时候，存储方案不一定跟着变化，这样的存储构件不必随着商业构件的改变而改变。
- 在存储逻辑发生改变，商业逻辑不一定跟着变化，比如一个系统可能因为存储量的变化改变需要跟换数据库。这样做就可以避免改变存储方案的时候，影响商业逻辑。

#####浏览器的Cookie文件
Cookie是由网络服务器发送出来用以存储在网络浏览器上的小量信息，从而下次用户有使用这个浏览器回到这个网络服务器时候，网络服务器可以从此
浏览器读回此信息。Cookie是非常有用的，可以让浏览器记住这位访问的特定信息，如上次访问的位置，花费的时间，或者用户首选项。

Cookie是一个存储在浏览器目录中的文本文件，当浏览器运行时，存储在RAM中，一旦用户从该网站或者网络服务器退出，Cookie也可存储在计算机的
硬盘上，Cookie实际上就是备忘录角色，如下图：
![KrWoGR.png](https://s2.ax1x.com/2019/10/27/KrWoGR.png)
显然，这也是备忘录的应用。浏览器扮演负责人的角色，Cookie便是备忘录角色，而网站便是发起人角色。网站通过浏览器读取Cookie中的信息，而
浏览器仅仅保存传递来的cookie。

#####操作Session对象的API
每一个Session对象都提供一套put和get方法，可以向Session对象存储信息，或者从中读取信息。显然，Session对象就可以当做负责人角色使用，
存入Session对象的任何信息都是备忘录角色，网站系统则是发起人角色。
![Kr4jdU.png](https://s2.ax1x.com/2019/10/27/Kr4jdU.png)

#####系统配置文件
一个软件系统有一些配置参数可能会存储在一个配置文件里面，包括一些用户偏爱的视窗位置，系统选项等。比如在视图关闭时，软件系统会将视窗
位置存储在配置文件中；在软件系统重新启动时，回收想从配置文件中读取的这些位置参数，并将视窗恢复到上一次关闭的状态上。


###优缺点
#####优点
- 有时候发起人对象的内部信息必须保存在发起人对象以外的地方，但是必须要由发起人对象自己读取，这时，使用备忘录可以把复杂的发起人内部信息
对其他的对象屏蔽起来，从而可以恰当地保持封装的边界。

- 本模式简化了发起人（originator）类，发起人（Originator）不再需要管理和保存其内部状态的一个个版本，客户端可以自行管理它们所需要的
这些状态的版本。

- 当发起人角色的状态改变的时候，有可能这个状态无效，这个时候就可以使用暂时存储起来的备忘录将状态复原。
#####缺点
- 如果发起人角色的状态需要完整地存储在备忘录对象中，那么在资源消耗上面备忘录对象会很昂贵。

- 当负责人角色将一个备忘录存储起来的时候，负责人可能并不知道这个状态会占用多大的存储空间，从而无法提醒用户一个操作是否会很昂贵。

- 当发起人角色的状态改变的时候，有可能这个状态无效，如果状态改变的成功率不高的话，不如采取“假如”协议模式。

###与其他模式的区别与联系
#####与命令模式
![KrRPfI.png](https://s2.ax1x.com/2019/10/27/KrRPfI.png)
#####与原型模型模式
![KrRA6f.png](https://s2.ax1x.com/2019/10/27/KrRA6f.png)
#####与迭代模式
![KrREX8.png](https://s2.ax1x.com/2019/10/27/KrREX8.png)
###总结




